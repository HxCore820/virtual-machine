name: üñ•Ô∏è Windows RDP 

on: 
  workflow_dispatch:
    inputs:
      os_version:
        description: 'üìÄ Select Operating System / Ch·ªçn H·ªá ƒêi·ªÅu H√†nh'
        required: true
        default: 'Windows Server 2025 (Docker - 4vCPU | 8GB RAM)'
        type: choice
        options: 
          - "Windows Server 2025 (Docker - 4vCPU | 8GB RAM)"
          - "Windows Server 2022 (Docker - 4vCPU | 8GB RAM)"
          - "Windows Server 2019 (Docker - 4vCPU | 8GB RAM)"
          - "Windows Server 2012 (Docker - 4vCPU | 8GB RAM)"
          - "Windows 11 Professional (Docker - 4vCPU | 8GB RAM)"
          - "Windows 10 Professional (Docker - 4vCPU | 8GB RAM)"
      
      num_machines:
        description: 'üñ•Ô∏è Number of Machines / S·ªë l∆∞·ª£ng m√°y (1-10)'
        required: true
        default: '1'
        type: choice
        options:
          - '1'
          - '2'
          - '3'
          - '4'
          - '5'
          - '6'
          - '7'
          - '8'
          - '9'
          - '10'
      
      language:
        description: 'üåê Language / Ng√¥n ng·ªØ'
        required: true
        default: 'English'
        type: choice
        options:
          - "English"
          - "Ti·∫øng Vi·ªát"

jobs:
  # ==================== PREPARE MATRIX ====================
  prepare:
    runs-on: ubuntu-latest
    outputs:
      matrix: ${{ steps.set-matrix.outputs.matrix }}
    steps:
      - name: Set matrix
        id: set-matrix
        run: |
          NUM="${{ github.event.inputs.num_machines }}"
          MATRIX="["
          for i in $(seq 1 $NUM); do
            if [ $i -gt 1 ]; then MATRIX="${MATRIX},"; fi
            MATRIX="${MATRIX}${i}"
          done
          MATRIX="${MATRIX}]"
          echo "matrix=$MATRIX" >> $GITHUB_OUTPUT

  # ==================== WINDOWS RDP DOCKER ====================
  windows-rdp-docker:
    needs: prepare
    runs-on: ubuntu-latest
    timeout-minutes: 360
    strategy:
      matrix:
        instance: ${{ fromJson(needs.prepare.outputs.matrix) }}
      fail-fast: false
      max-parallel: 10
    
    steps:
      - name: üîß System Initialization / Kh·ªüi t·∫°o h·ªá th·ªëng
        run: |
          sudo apt-get update > /dev/null 2>&1
          
          SELECTED_OS="${{ github.event.inputs.os_version }}"
          INSTANCE="${{ matrix.instance }}"
          
          # Determine Windows Version
          if [[ "$SELECTED_OS" == *"2025"* ]]; then
            VERSION="2025"
            OS_NAME="Windows Server 2025"
          elif [[ "$SELECTED_OS" == *"2022"* ]]; then
            VERSION="2022"
            OS_NAME="Windows Server 2022"
          elif [[ "$SELECTED_OS" == *"2019"* ]]; then
            VERSION="2019"
            OS_NAME="Windows Server 2019"
          elif [[ "$SELECTED_OS" == *"2012"* ]]; then
            VERSION="2012"
            OS_NAME="Windows Server 2012"
          elif [[ "$SELECTED_OS" == *"11"* ]]; then
            VERSION="11"
            OS_NAME="Windows 11 Professional"
          elif [[ "$SELECTED_OS" == *"10"* ]]; then
            VERSION="10"
            OS_NAME="Windows 10 Professional"
          fi
          
          # Calculate unique ports for each instance
          RDP_PORT=$((3389 + INSTANCE - 1))
          WEB_PORT=$((8006 + INSTANCE - 1))
          
          # Create Docker Compose Configuration
          cat <<EOF > docker-compose.yml
          version: "3.9"
          services:
            windows:
              image: dockurr/windows
              container_name: windows_rdp_${INSTANCE}
              privileged: true
              environment:
                VERSION: "$VERSION"
                USERNAME: "Admin"
                PASSWORD: "Window@123456"
                RAM_SIZE: "8G"
                CPU_CORES: "4"
                DISK_SIZE: "60G"
              devices: [ "/dev/kvm" ]
              ports:
                - "${RDP_PORT}:3389"
                - "${WEB_PORT}:8006"
          EOF
          
          docker compose up -d > /dev/null 2>&1
          
          echo "OS_NAME=$OS_NAME" >> $GITHUB_ENV
          echo "RDP_PORT=$RDP_PORT" >> $GITHUB_ENV
          echo "WEB_PORT=$WEB_PORT" >> $GITHUB_ENV
          
          # Download Kami Tunnel
          wget -q https://github.com/kami2k1/tunnel/releases/latest/download/kami-tunnel-linux-amd64.tar.gz
          tar -xzf kami-tunnel-linux-amd64.tar.gz > /dev/null 2>&1
          chmod +x kami-tunnel
          
          # Start Kami Tunnel for RDP
          nohup ./kami-tunnel $RDP_PORT > kami_tunnel_rdp.log 2>&1 &
          RDP_PID=$!
          echo "RDP Tunnel PID: $RDP_PID"
          
          sleep 5
          
          # Start Kami Tunnel for Web Viewer
          nohup ./kami-tunnel $WEB_PORT > kami_tunnel_web.log 2>&1 &
          WEB_PID=$!
          echo "Web Tunnel PID: $WEB_PID"

      - name: üåê Connection Information / Th√¥ng tin k·∫øt n·ªëi
        run: |
          LANG="${{ github.event.inputs.language }}"
          INSTANCE="${{ matrix.instance }}"
          
          if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
            echo "üîÑ ƒêang thi·∫øt l·∫≠p k·∫øt n·ªëi ƒë·∫øn $OS_NAME #$INSTANCE..."
          else
            echo "üîÑ Establishing connection to $OS_NAME #$INSTANCE..."
          fi
          echo ""
          
          # Get RDP IP
          if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
            echo "‚è≥ ƒêang ch·ªù RDP tunnel (C·ªïng $RDP_PORT)..."
          else
            echo "‚è≥ Waiting for RDP tunnel (Port $RDP_PORT)..."
          fi
          
          RDP_PUBLIC_IP=""
          RDP_RETRY=0
          
          while [ -z "$RDP_PUBLIC_IP" ] && [ $RDP_RETRY -lt 60 ]; do
            if [ -f kami_tunnel.txt ]; then
              RDP_CONTENT=$(cat kami_tunnel.txt 2>/dev/null | head -1)
              if [[ "$RDP_CONTENT" =~ ^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+:[0-9]+$ ]]; then
                RDP_PUBLIC_IP="$RDP_CONTENT"
                if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
                  echo "‚úÖ ƒê√£ l·∫•y IP c√¥ng khai RDP: $RDP_PUBLIC_IP"
                else
                  echo "‚úÖ RDP Public IP captured: $RDP_PUBLIC_IP"
                fi
                break
              fi
            fi
            sleep 3
            RDP_RETRY=$((RDP_RETRY + 1))
          done
          
          if [ -z "$RDP_PUBLIC_IP" ]; then
            if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
              echo "‚ùå L·ªñI: Kh√¥ng th·ªÉ l·∫•y IP c√¥ng khai RDP"
            else
              echo "‚ùå ERROR: Could not retrieve RDP Public IP"
            fi
            exit 1
          fi
          
          # Get Web Viewer IP
          if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
            echo "‚è≥ ƒêang ch·ªù Web tunnel (C·ªïng $WEB_PORT)..."
          else
            echo "‚è≥ Waiting for Web tunnel (Port $WEB_PORT)..."
          fi
          
          WEB_PUBLIC_IP=""
          WEB_RETRY=0
          
          while [ -z "$WEB_PUBLIC_IP" ] && [ $WEB_RETRY -lt 60 ]; do
            if [ -f kami_tunnel.txt ]; then
              WEB_CONTENT=$(cat kami_tunnel.txt 2>/dev/null | tail -1)
              if [[ "$WEB_CONTENT" =~ ^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+:[0-9]+$ ]] && [ "$WEB_CONTENT" != "$RDP_PUBLIC_IP" ]; then
                WEB_PUBLIC_IP="$WEB_CONTENT"
                if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
                  echo "‚úÖ ƒê√£ l·∫•y IP c√¥ng khai Web: $WEB_PUBLIC_IP"
                else
                  echo "‚úÖ Web Public IP captured: $WEB_PUBLIC_IP"
                fi
                break
              fi
            fi
            sleep 3
            WEB_RETRY=$((WEB_RETRY + 1))
          done
          
          if [ -z "$WEB_PUBLIC_IP" ]; then
            if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
              echo "‚ùå L·ªñI: Kh√¥ng th·ªÉ l·∫•y IP c√¥ng khai Web"
            else
              echo "‚ùå ERROR: Could not retrieve Web Public IP"
            fi
            exit 1
          fi
          
          # Display Connection Information
          echo ""
          if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
            echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
            echo "‚ïë              ‚úÖ $OS_NAME #$INSTANCE - S·∫¥N S√ÄNG K·∫æT N·ªêI"
            echo "‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïë  üñ•Ô∏è  K·∫æT N·ªêI REMOTE DESKTOP (RDP)                                     ‚ïë"
            echo "‚ïë  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚ïë"
            echo "‚ïë  üî¢  M√°y s·ªë         : $INSTANCE"
            echo "‚ïë  üåê  IP C√¥ng khai   : $RDP_PUBLIC_IP"
            echo "‚ïë  üë§  T√†i kho·∫£n      : Admin                                           ‚ïë"
            echo "‚ïë  üîê  M·∫≠t kh·∫©u       : Window@123456                                   ‚ïë"
            echo "‚ïë  üìç  C·ªïng RDP       : $RDP_PORT                                       ‚ïë"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïë  üåê  TR√åNH XEM WEB (Theo d√µi c√†i ƒë·∫∑t)                                 ‚ïë"
            echo "‚ïë  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚ïë"
            echo "‚ïë  üîó  ƒê·ªãa ch·ªâ Web    : http://$WEB_PUBLIC_IP"
            echo "‚ïë  üìç  C·ªïng           : $WEB_PORT                                       ‚ïë"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïë  üíª  T√ÄI NGUY√äN H·ªÜ TH·ªêNG                                              ‚ïë"
            echo "‚ïë  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚ïë"
            echo "‚ïë  ‚ö°  CPU            : 4 vCPU                                          ‚ïë"
            echo "‚ïë  üß†  RAM            : 8GB                                             ‚ïë"
            echo "‚ïë  üíæ  L∆∞u tr·ªØ        : 60GB                                            ‚ïë"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
            echo ""
            echo "üí° M·∫∏O: D√πng Web Viewer ƒë·ªÉ theo d√µi ti·∫øn tr√¨nh c√†i ƒë·∫∑t Windows!"
          else
            echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
            echo "‚ïë              ‚úÖ $OS_NAME #$INSTANCE - READY FOR CONNECTION"
            echo "‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïë  üñ•Ô∏è  REMOTE DESKTOP CONNECTION (RDP)                                  ‚ïë"
            echo "‚ïë  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚ïë"
            echo "‚ïë  üî¢  Machine No.    : $INSTANCE"
            echo "‚ïë  üåê  Public IP      : $RDP_PUBLIC_IP"
            echo "‚ïë  üë§  Username       : Admin                                           ‚ïë"
            echo "‚ïë  üîê  Password       : Window@123456                                   ‚ïë"
            echo "‚ïë  üìç  RDP Port       : $RDP_PORT                                       ‚ïë"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïë  üåê  WEB VIEWER (Monitor Installation)                                ‚ïë"
            echo "‚ïë  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚ïë"
            echo "‚ïë  üîó  Web Address    : http://$WEB_PUBLIC_IP"
            echo "‚ïë  üìç  Port           : $WEB_PORT                                       ‚ïë"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïë  üíª  SYSTEM RESOURCES                                                 ‚ïë"
            echo "‚ïë  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚ïë"
            echo "‚ïë  ‚ö°  CPU            : 4 vCPU                                          ‚ïë"
            echo "‚ïë  üß†  RAM            : 8GB                                             ‚ïë"
            echo "‚ïë  üíæ  Storage        : 60GB                                            ‚ïë"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
            echo ""
            echo "üí° TIP: Use Web Viewer to monitor Windows installation progress!"
          fi
          echo ""
          
          echo "RDP_PUBLIC_IP=$RDP_PUBLIC_IP" >> $GITHUB_ENV
          echo "WEB_PUBLIC_IP=$WEB_PUBLIC_IP" >> $GITHUB_ENV

      - name: ‚è∞ Session Keepalive / Duy tr√¨ phi√™n
        run: |
          LANG="${{ github.event.inputs.language }}"
          INSTANCE="${{ matrix.instance }}"
          END_TIME=$(($(date +%s) + 21600))
          
          while [ $(date +%s) -lt $END_TIME ]; do
            REMAINING=$(( ($END_TIME - $(date +%s)) / 60 ))
            HOURS=$(($REMAINING / 60))
            MINUTES=$(($REMAINING % 60))
            
            if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
              echo -ne "\rüü¢ $OS_NAME #$INSTANCE ƒêang ho·∫°t ƒë·ªông | C√≤n l·∫°i: ${HOURS}h ${MINUTES}m | RDP: $RDP_PUBLIC_IP | Web: http://$WEB_PUBLIC_IP     "
            else
              echo -ne "\rüü¢ $OS_NAME #$INSTANCE Active | Remaining: ${HOURS}h ${MINUTES}m | RDP: $RDP_PUBLIC_IP | Web: http://$WEB_PUBLIC_IP     "
            fi
            
            sleep 30
          done
          echo ""
