name: üöÄ RDP Native

on: 
  workflow_dispatch:
    inputs:
      os_version:
        description: 'üìÄ Select Operating System / Ch·ªçn H·ªá ƒêi·ªÅu H√†nh'
        required: true
        default: 'Windows Server 2025 (Native - 4vCPU | 16GB RAM)'
        type: choice
        options: 
          - "Windows Server 2025 (Native - 4vCPU | 16GB RAM)"
          - "Ubuntu 24.04 Desktop (Native - 4vCPU | 16GB RAM)"
      
      language:
        description: 'üåê Language / Ng√¥n ng·ªØ'
        required: true
        default: 'English'
        type: choice
        options:
          - "English"
          - "Ti·∫øng Vi·ªát"

jobs:
  # ==================== WINDOWS SERVER 2025 NATIVE ====================
  windows-native:
    if: github.event.inputs.os_version == 'Windows Server 2025 (Native - 4vCPU | 16GB RAM)'
    runs-on: windows-latest
    timeout-minutes: 360
    
    steps:
      - name: üîß System Initialization / Kh·ªüi t·∫°o h·ªá th·ªëng
        run: |
          $ErrorActionPreference = 'SilentlyContinue'
          
          # Create Administrator Account
          net user Admin Window@123456 /add /expires:never /passwordchg:no
          net localgroup Administrators Admin /add
          net localgroup "Remote Desktop Users" Admin /add
          
          # Configure RDP Service
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server' -Name "fDenyTSConnections" -Value 0 -Force
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -Name "UserAuthentication" -Value 0 -Force
          netsh advfirewall firewall add rule name="RDP-3389" dir=in action=allow protocol=TCP localport=3389 profile=any
          
          # Start Kami Tunnel
          Start-Process powershell -ArgumentList "-NoProfile -Command `
            iwr https://github.com/kami2k1/tunnel/releases/latest/download/kami-tunnel-windows-amd64.tar.gz -OutFile kami-tunnel-windows-amd64.tar.gz; `
            tar -xzf kami-tunnel-windows-amd64.tar.gz; `
            .\kami-tunnel.exe 3389"

      - name: üåê Connection Information / Th√¥ng tin k·∫øt n·ªëi
        run: |
          $LANG = "${{ github.event.inputs.language }}"
          
          if ($LANG -eq "Ti·∫øng Vi·ªát") {
            Write-Host "üîÑ ƒêang thi·∫øt l·∫≠p k·∫øt n·ªëi ƒë·∫øn Windows Server 2025..." -ForegroundColor Cyan
          } else {
            Write-Host "üîÑ Establishing connection to Windows Server 2025..." -ForegroundColor Cyan
          }
          
          $publicIP = ""
          while (-not $publicIP) {
              if (Test-Path "kami_tunnel.txt") {
                  $content = Get-Content "kami_tunnel.txt"
                  if ($content -match '\.') { $publicIP = $content }
              }
              if (-not $publicIP) { Start-Sleep -Seconds 3 }
          }
          
          Write-Host ""
          if ($LANG -eq "Ti·∫øng Vi·ªát") {
            Write-Host "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó" -ForegroundColor Green
            Write-Host "‚ïë    ‚úÖ WINDOWS SERVER 2025 - S·∫¥N S√ÄNG K·∫æT N·ªêI            ‚ïë" -ForegroundColor Green
            Write-Host "‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£" -ForegroundColor White
            Write-Host "‚ïë üåê  IP C√¥ng khai : $publicIP" -ForegroundColor Yellow
            Write-Host "‚ïë üë§  T√†i kho·∫£n    : Admin" -ForegroundColor White
            Write-Host "‚ïë üîê  M·∫≠t kh·∫©u     : Window@123456" -ForegroundColor White
            Write-Host "‚ïë üìç  C·ªïng RDP     : 3389" -ForegroundColor White
            Write-Host "‚ïë üíª  T√†i nguy√™n   : 4 vCPU | 16GB RAM" -ForegroundColor Cyan
            Write-Host "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù" -ForegroundColor Green
          } else {
            Write-Host "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó" -ForegroundColor Green
            Write-Host "‚ïë    ‚úÖ WINDOWS SERVER 2025 - READY FOR CONNECTION         ‚ïë" -ForegroundColor Green
            Write-Host "‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£" -ForegroundColor White
            Write-Host "‚ïë üåê  Public IP    : $publicIP" -ForegroundColor Yellow
            Write-Host "‚ïë üë§  Username     : Admin" -ForegroundColor White
            Write-Host "‚ïë üîê  Password     : Window@123456" -ForegroundColor White
            Write-Host "‚ïë üìç  RDP Port     : 3389" -ForegroundColor White
            Write-Host "‚ïë üíª  Resources    : 4 vCPU | 16GB RAM" -ForegroundColor Cyan
            Write-Host "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù" -ForegroundColor Green
          }
          Write-Host ""
          
          # Save to environment
          "PUBLIC_IP=$publicIP" | Out-File -Append -FilePath $env:GITHUB_ENV

      - name: ‚è∞ Session Keepalive / Duy tr√¨ phi√™n
        run: |
          $LANG = "${{ github.event.inputs.language }}"
          $endTime = (Get-Date).AddMinutes(340)
          
          while ((Get-Date) -lt $endTime) {
              $left = $endTime - (Get-Date)
              $hours = [math]::Floor($left.TotalHours)
              $minutes = $left.Minutes
              
              if ($LANG -eq "Ti·∫øng Vi·ªát") {
                Write-Host "`rüü¢ Windows Server 2025 ƒêang ho·∫°t ƒë·ªông | C√≤n l·∫°i: ${hours}h ${minutes}m | RDP: $env:PUBLIC_IP     " -NoNewline -ForegroundColor Green
              } else {
                Write-Host "`rüü¢ Windows Server 2025 Active | Remaining: ${hours}h ${minutes}m | RDP: $env:PUBLIC_IP     " -NoNewline -ForegroundColor Green
              }
              
              Start-Sleep -Seconds 30
          }
          Write-Host ""

  # ==================== UBUNTU DESKTOP NATIVE ====================
  ubuntu-native:
    if: github.event.inputs.os_version == 'Ubuntu 24.04 Desktop (Native - 4vCPU | 16GB RAM)'
    runs-on: ubuntu-latest
    timeout-minutes: 360
    
    steps:
      - name: üîß System Initialization / Kh·ªüi t·∫°o h·ªá th·ªëng
        run: |
          # Update system
          sudo apt-get update > /dev/null 2>&1
          
          # Install XFCE Desktop Environment
          sudo DEBIAN_FRONTEND=noninteractive apt-get install -y \
            xfce4 xfce4-goodies xorg dbus-x11 x11-xserver-utils > /dev/null 2>&1
          
          # Install XRDP Server
          sudo apt-get install -y xrdp > /dev/null 2>&1
          
          # Configure XRDP to use XFCE
          echo "xfce4-session" | sudo tee /etc/xrdp/startwm.sh > /dev/null
          sudo chmod +x /etc/xrdp/startwm.sh
          
          # Enable and start XRDP
          sudo systemctl enable xrdp > /dev/null 2>&1
          sudo systemctl start xrdp > /dev/null 2>&1
          
          # Create Administrator Account
          sudo useradd -m -s /bin/bash Admin
          echo "Admin:Ubuntu@123456" | sudo chpasswd
          sudo usermod -aG sudo Admin
          
          # Configure XFCE for new user
          sudo mkdir -p /home/Admin
          echo "xfce4-session" | sudo tee /home/Admin/.xsession > /dev/null
          sudo chown -R Admin:Admin /home/Admin
          
          # Download Kami Tunnel
          wget -q https://github.com/kami2k1/tunnel/releases/latest/download/kami-tunnel-linux-amd64.tar.gz
          tar -xzf kami-tunnel-linux-amd64.tar.gz > /dev/null 2>&1
          chmod +x kami-tunnel
          
          # Start Kami Tunnel for Port 3389
          nohup ./kami-tunnel 3389 > kami_tunnel.log 2>&1 &
          TUNNEL_PID=$!
          echo "Tunnel PID: $TUNNEL_PID"

      - name: üåê Connection Information / Th√¥ng tin k·∫øt n·ªëi
        run: |
          LANG="${{ github.event.inputs.language }}"
          
          if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
            echo "üîÑ ƒêang thi·∫øt l·∫≠p k·∫øt n·ªëi ƒë·∫øn Ubuntu 24.04 Desktop..."
          else
            echo "üîÑ Establishing connection to Ubuntu 24.04 Desktop..."
          fi
          echo ""
          
          # Wait for tunnel file
          if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
            echo "‚è≥ ƒêang ch·ªù k·∫øt n·ªëi tunnel..."
          else
            echo "‚è≥ Waiting for tunnel connection..."
          fi
          
          RETRY=0
          while [ ! -f kami_tunnel.txt ] && [ $RETRY -lt 60 ]; do
            sleep 2
            RETRY=$((RETRY + 1))
          done
          
          if [ ! -f kami_tunnel.txt ]; then
            if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
              echo "‚ùå L·ªñI: Kh√¥ng t·∫°o ƒë∆∞·ª£c file kami_tunnel.txt"
            else
              echo "‚ùå ERROR: kami_tunnel.txt not created"
            fi
            cat kami_tunnel.log 2>/dev/null
            exit 1
          fi
          
          # Get Public IP
          PUBLIC_IP=""
          RETRY=0
          while [ -z "$PUBLIC_IP" ] && [ $RETRY -lt 60 ]; do
            IP_CONTENT=$(cat kami_tunnel.txt 2>/dev/null | head -1)
            if [[ "$IP_CONTENT" =~ ^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+:[0-9]+$ ]]; then
              PUBLIC_IP="$IP_CONTENT"
              if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
                echo "‚úÖ ƒê√£ l·∫•y IP c√¥ng khai: $PUBLIC_IP"
              else
                echo "‚úÖ Public IP captured: $PUBLIC_IP"
              fi
              break
            fi
            sleep 2
            RETRY=$((RETRY + 1))
          done
          
          if [ -z "$PUBLIC_IP" ]; then
            if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
              echo "‚ùå L·ªñI: Kh√¥ng th·ªÉ l·∫•y IP c√¥ng khai"
            else
              echo "‚ùå ERROR: Could not retrieve Public IP"
            fi
            cat kami_tunnel.txt 2>/dev/null
            exit 1
          fi
          
          # Display Connection Information
          echo ""
          if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
            echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
            echo "‚ïë         ‚úÖ UBUNTU 24.04 DESKTOP - S·∫¥N S√ÄNG K·∫æT N·ªêI                   ‚ïë"
            echo "‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïë  üñ•Ô∏è  K·∫æT N·ªêI REMOTE DESKTOP (RDP)                                     ‚ïë"
            echo "‚ïë  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚ïë"
            echo "‚ïë  üåê  IP C√¥ng khai   : $PUBLIC_IP"
            echo "‚ïë  üë§  T√†i kho·∫£n      : Admin                                           ‚ïë"
            echo "‚ïë  üîê  M·∫≠t kh·∫©u       : Ubuntu@123456                                   ‚ïë"
            echo "‚ïë  üìç  C·ªïng RDP       : 3389                                            ‚ïë"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïë  üñ•Ô∏è  M√îI TR∆Ø·ªúNG DESKTOP                                               ‚ïë"
            echo "‚ïë  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚ïë"
            echo "‚ïë  üé®  Desktop        : XFCE4 (Nh·∫π & Nhanh)                             ‚ïë"
            echo "‚ïë  üîß  RDP Server     : XRDP                                            ‚ïë"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïë  üíª  T√ÄI NGUY√äN H·ªÜ TH·ªêNG                                              ‚ïë"
            echo "‚ïë  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚ïë"
            echo "‚ïë  ‚ö°  CPU            : 4 vCPU                                          ‚ïë"
            echo "‚ïë  üß†  RAM            : 16GB                                            ‚ïë"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
          else
            echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
            echo "‚ïë         ‚úÖ UBUNTU 24.04 DESKTOP - READY FOR CONNECTION               ‚ïë"
            echo "‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïë  üñ•Ô∏è  REMOTE DESKTOP CONNECTION (RDP)                                  ‚ïë"
            echo "‚ïë  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚ïë"
            echo "‚ïë  üåê  Public IP      : $PUBLIC_IP"
            echo "‚ïë  üë§  Username       : Admin                                           ‚ïë"
            echo "‚ïë  üîê  Password       : Ubuntu@123456                                   ‚ïë"
            echo "‚ïë  üìç  RDP Port       : 3389                                            ‚ïë"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïë  üñ•Ô∏è  DESKTOP ENVIRONMENT                                              ‚ïë"
            echo "‚ïë  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚ïë"
            echo "‚ïë  üé®  Desktop        : XFCE4 (Lightweight & Fast)                     ‚ïë"
            echo "‚ïë  üîß  RDP Server     : XRDP                                            ‚ïë"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïë  üíª  SYSTEM RESOURCES                                                 ‚ïë"
            echo "‚ïë  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚ïë"
            echo "‚ïë  ‚ö°  CPU            : 4 vCPU                                          ‚ïë"
            echo "‚ïë  üß†  RAM            : 16GB                                            ‚ïë"
            echo "‚ïë                                                                       ‚ïë"
            echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
          fi
          echo ""
          
          echo "PUBLIC_IP=$PUBLIC_IP" >> $GITHUB_ENV

      - name: ‚è∞ Session Keepalive / Duy tr√¨ phi√™n
        run: |
          LANG="${{ github.event.inputs.language }}"
          END_TIME=$(($(date +%s) + 21600))
          
          while [ $(date +%s) -lt $END_TIME ]; do
            REMAINING=$(( ($END_TIME - $(date +%s)) / 60 ))
            HOURS=$(($REMAINING / 60))
            MINUTES=$(($REMAINING % 60))
            
            if [ "$LANG" = "Ti·∫øng Vi·ªát" ]; then
              echo -ne "\rüü¢ Ubuntu 24.04 Desktop ƒêang ho·∫°t ƒë·ªông | C√≤n l·∫°i: ${HOURS}h ${MINUTES}m | RDP: $PUBLIC_IP | Desktop: XFCE4     "
            else
              echo -ne "\rüü¢ Ubuntu 24.04 Desktop Active | Remaining: ${HOURS}h ${MINUTES}m | RDP: $PUBLIC_IP | Desktop: XFCE4     "
            fi
            
            sleep 30
          done
          echo ""
